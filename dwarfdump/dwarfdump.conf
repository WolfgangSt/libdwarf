# MIPS/IRIX  ISA/ABI
# Used to configure dwarfdump printing of .debug_frame and
# .eh_frame.

# Any number of abi's can be described. Only one can be selected
# in a given darfdump run (see dwarfdump options)
#  Available commands are
# beginabi:  <abiname>
# reg: <regname> <dwarf regnumber>
# frame_interface: <integer value 2 or 3>
# cfa_reg:  <number>
# initial_reg_value:  <number: normally 1034 or 1035 >
# reg_table_size: <size of table>
# endabi:  <abiname>
#
# Symbolic names do not work here, use literal numbers
# where applicable (in C standard decimal, octal (leading 0) or
# hexadecimal <leading 0x>).
#
# Whitespace is required to separate command: from operands and
# operands from each other on a line.
#
# There is no ordering required within a beginabi/endabi pair.
# As many ABIs as required may be listed.
# dwarfdump will choose exactly one abi to dump frame information.
#


# Here using MIPS abi as an example to describe
# the format. The MIPS/IRIX ABI is built-in to dwarfdump, so this one
# is not really required.
# Begin with abi name (use here and on dwarfdump command line).
beginabi: mips

# Instructs dwarfdump to default to the older frame interface.
# Use value 3 to use the newer interface.
# The '2' interface is supported but deprecated (deprecated
# because it cannot work with all popular ABIs: mixing
# the cfa-rule into the table column set was not a good idea
# but it is part of the MIPS/IRIX standard usage).
frame_interface: 2

# If (and only if) using  frame_interface: 2 tell dwarfdump
# what table colum that DW_FRAME_CFA_COL is.
# If using frame_interface: 3 cfa_reg: should be 
#  DW_FRAME_CFA_COL3 (1036)
cfa_reg: 0

# For MIPS, the same as DW_FRAME_SAME_VAL (1035).
# For other ISA/ABIs 1034 (DW_FRAME_UNDEFINED_VAL) might be better.
# Depends on the ABI convention, if set wrong way too many
# regs will be listed in the frame output.
# This instructs  dwarfdump  to set libdwarf to this value,
# overriding the libdwarf default.
# If initial_reg_value not set the libdwarf default is used
# (see libdwarf.h DW_FRAME_REG_INITIAL_VALUE).
initial_reg_value:  1035  # DW_FRAME_SAME_VAL

# Built in to frame_interface: 2 as 66.
reg_table_size: 66


# Only name registers for wich a r4 (for example) is not what you
# want to  see
# No particular order  of the reg: lines required.
reg: cfa 0   # Used with MIPS/IRIX original DWARF2 interface
reg: r1/at 1
reg: r2/v0 2 
reg: r3/v1 3
reg: r4/a0  4
reg: r5/a1  5
reg: r6/a2  6
reg: r7/a3  7
reg: r8/t0  8
reg: r9/t1  9
reg: r10/t2 10
reg: r11/t3 11
reg: r12/t4 12
reg: r13/t5 13
reg: r14/t6 14
reg: r15/t7 15
reg: r16/s0 16
reg: r17/s1 17
reg: r18/s2 18
reg: r19/s3 19
reg: r20/s4 20
reg: r21/s5 21
reg: r22/s6 22
reg: r23/s7 23
reg: r24/t8 24
reg: r25/t9 25
reg: r26/k0 26
reg: r27/k1 27
reg: r28/gp 28
reg: r29/sp 29
reg: r30/s8 30
reg: r31  31

reg: $f0 32
reg: $f1 33
reg: $f2  34
reg: $f3 35
reg: $f4 36
reg: $f5 37
reg: $f6 38
reg: $f7 39
reg: $f8 40
reg: $f9 41
reg: $f10 42
reg: $f11 43
reg: $f12 44
reg: $f13 45
reg: $f14  46
reg: $f15 47
reg: $f16 48
reg: $f17 49
reg: $f18 50
reg: $f19 51
reg: $f20 52
reg: $f21 53
reg: $f22 54
reg: $f23 55
reg: $f24 56
reg: $f25 57
reg: $f26 58
reg: $f27 59
reg: $f28 60
reg: $f29 61
reg: $f30 62
reg: $f31 63
reg: ra  64
reg: slk 65


# End of abi definition.
endabi: mips




# MIPS/IRIX  ISA/ABI for testing libdwarf.
beginabi: mips-simple
frame_interface: 2
reg_table_size: 66
cfa_reg: 0
initial_reg_value:  1035

reg: cfa 0   # Used with MIPS/IRIX original DWARF2 interface
reg: ra  64
reg: slk 65

# End of abi definition.
endabi: mips-simple

# MIPS/IRIX  ISA/ABI for testing  the new frame interface
# with libdwarf.
beginabi: mips-simple3
frame_interface: 3

# When using frame_interface: 3 the size of the register table
# is not fixed. It can be as large as needed. 
reg_table_size: 66
cfa_reg: 1036  # DW_FRAME_CFA_COL3
initial_reg_value:  1035

# No cfa as a 'normal' register. 
# Rule 0 is just register 0, which is not used
# in frame descriptions.
# (so cfa does not have a number here, and dwarfdump gives
# it the name 'cfa' automatically).
reg: ra  64
reg: slk 65
# End of abi definition.
endabi: mips-simple3


beginabi: ia64
frame_interface: 3
initial_reg_value: 1034  # DW_FRAME_UNDEFINED_VAL
cfa_reg: 1036  # DW_FRAME_CFA_COL3
reg_table_size: 695

# The following register names are not necessarily correct...
# Register indexes r32-r127 not used.
reg: f0 128
# ...
reg: f127 255
reg: b0 321
reg: b1 322
reg: b2 323
reg: b3 324
reg: b4 325
reg: b5 326
reg: b6 327
reg: b7 328
reg: vfp 329
reg: vrap 330
reg: pr 331
reg: ip 332
reg: psr 333
reg: cfm 334
reg: k0 335
reg: k1 336
reg: k2 337
reg: k3 338
reg: k4 339
reg: k5 340
reg: k6 341
reg: k7 342
reg: rsc  350 
reg: bsp 351 
reg: bspstore 352 
reg: rnat 353
reg: fcr 355
reg: eflag 358
reg: csd 359
reg: ssd 360 
reg: cflg 361
reg:  fsr 362
reg: fir 363
reg:  fdr 364
reg: pfs 398 
reg: lc 399
reg: ec 400

endabi: ia64


beginabi: x86
frame_interface: 3
initial_reg_value: 1035  # DW_FRAME_SAME_VAL
reg_table_size: 66  # more than large enough, hopefully.
cfa_reg: 1036  # DW_FRAME_CFA_COL3

# The following register names are not necessarily correct...
reg: eax 0
reg: ecx 1    
reg: edx 2
reg: ebx 3
reg: esp 4
reg: ebp 5
reg: esi 6
reg: edi 7
reg: eip 8
reg: eflags 9
reg: cs 10
reg: ss 11
reg: ds 12
reg: es 13
reg: fs 14
reg: gs 15
reg: st0 16
reg: st1 17
reg: st2 18
reg: st3 19
reg: st4 20
reg: st5 21
reg: st6 22
reg: st7 23
reg: fctrl 24
reg: fstat 25
reg: ftag 26
reg: fiseg 27
reg: fioff 28
reg: foseg 29
reg: fooff 30
reg: fop   31
reg: xmm0  32
reg: xmm1 33
reg: xmm2 34
reg: xmm3  35
reg: xmm4 36
reg: xmm5 37
reg: xmm6 38
reg: xmm7 39
reg: mxcsr 40

endabi: x86
